<!DOCTYPE html>
<html lang="ko" class="h-100" data-bs-theme="auto">
  <!DOCTYPE html>
  <html lang="ko" class="h-100" data-bs-theme="auto">
    <head>
      <!-- CDN들 불러오기 -->
      <%- include('../components/cdn.ejs') %>
      <!-- CSS 연결 -->
      <link href="../static/css/user.css" rel="stylesheet" />
      <title>아이디 찾기</title>
    </head>
    <body class="d-flex h-100 text-center text-bg-white">
      <!-- 헤더 : 상단 메뉴바  -->
      <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
        <header class="container">
          <div><%- include('../components/header.ejs') %></div>
        </header>
<body>
    <div class="flex">
        <div class="login-box flex" id="content-div">
            <form action="" name="form-register">
                <div><input type="text" class="login-input" placeholder="이메일" name="email" required></div>
                <br />
                <button class="login-button" type="button" id="find-button" onclick="findId();"><span>아이디 찾기</span></button>
            </form>
        </div>
    </div>
    
    <script>
        function findId() {
            let email = document.forms["form-register"].email.value;
            if (!email) {
                alert("이메일을 입력해주세요.");
                return;
            }
    
            axios({
                method: 'post',
                url: '/user/findId',
                data: { email: email }
            }).then((res) => {
                if (res.data.userid) {
                    // 버튼을 숨기고 아이디 정보를 표시합니다.
                    document.getElementById('find-button').style.display = 'none';
                    let message = document.createElement('p');
                    message.innerText = "당신의 아이디는 " + res.data.userid + " 입니다.";
                    document.getElementById('content-div').appendChild(message);

                    // '로그인 페이지로 가기' 버튼을 생성합니다.
                    let loginButton = document.createElement('button');
                    loginButton.innerText = '로그인 페이지';
                    loginButton.onclick = function() {
                        location.href = '/user/signin';  
                    };
                    loginButton.style.backgroundColor = "rgb(43, 43, 43)";
                    loginButton.style.color = "white";
                    loginButton.style.width = "400px";
                    loginButton.style.height = "50px";
                    loginButton.style.margin = "8px";
                    loginButton.style.cursor = "pointer";
                    document.getElementById('content-div').appendChild(loginButton);

                    // '비밀번호 찾기' 버튼을 생성합니다.
                    let passwordButton = document.createElement('button');
                    passwordButton.innerText = '비밀번호 찾기';
                    passwordButton.onclick = function() {
                        location.href = '/user/findPassword'; 
                    };
                    passwordButton.style.backgroundColor = "rgb(43, 43, 43)";
                    passwordButton.style.color = "white";
                    passwordButton.style.width = "400px";
                    passwordButton.style.height = "50px";
                    passwordButton.style.margin = "8px";
                    passwordButton.style.cursor = "pointer";
                    document.getElementById('content-div').appendChild(passwordButton);
                } else {
                    alert("해당 이메일로 등록된 아이디가 없습니다.");
                }
            });
        }
    </script>
</body>
</html>