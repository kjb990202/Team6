<!doctype html>
<html lang="ko" class="h-100" data-bs-theme="auto">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Hugo 0.118.2">
    <title>SeSAC-it</title>
    <!-- 부트스트랩 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="canonical" href="https://getbootstrap.com/docs/5.3/examples/cover/">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@docsearch/css@3">
    <!-- Custom styles for this template -->
    <link href="../static/css/board.css" rel="stylesheet">
    <!-- TOAST TUI 에디터 CSS CDN -->
    <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />
  </head>

  <body class="d-flex h-100 text-center text-bg-white">
    <!-- 상단  메뉴-->
    <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
      <header class="mb-auto">
        <div>
          <a href="/">
            <h3 class="float-md-start mb-0">SeSAC-it</h3>
          </a>
          <nav class="nav nav-masthead justify-content-center float-md-end">
            <a class="nav-link fw-bold py-1 px-0" href=" /mapMain">맛집 지도</a>
            <a class="nav-link fw-bold py-1 px-0 active" href="/boardMain">게시판</a>
            <a class="nav-link fw-bold py-1 px-0" href="/signin">로그인</a>
          </nav>
        </div>
      </header>

      <main class="px-3">
<!-- 카테고리, 제목 선택창 -->
  <!-- pe-none : 마우스 호버시 마우스변경 방지 -->
<form class="row g-3 needs-validation" novalidate>
  <div class="col-md-100">
    <div class="pe-none" id="editTitle">카테고리<a style="color: red;">&nbsp;*</a></div>
    <!-- <label for="validationCuomst04" class="form-label" id="editTitle">카테고리<a style="color: red;">&nbsp;*</a></label> -->
    <select class="form-select" id="validationCustom04" required>
      <option selected disabled value="">카테고리를 선택해 주세요.</option>
      <option value="1">잡담</option>
      <option value="2">Q&A</option>
    </select>
    <div class="pe-none invalid-feedback">
      필수 선택 항목입니다.
    </div>
  </div>
  <div class="col-md-100">
    <div id="editTitle" class="pe-none">제목<a style="color: red;">&nbsp;*</a></div>
    <!-- <label for="validationCustom01" class="form-label" id="editTitle">제목<a style="color: red;">&nbsp;*</a></label> -->
    <input type="text" class="form-control" id="validationCustom01" placeholder="제목을 입력해 주세요." required>
    <div class="pe-none invalid-feedback">
      필수 입력 항목입니다.
    </div>
  </div>
        <div id="editTitle" class="pe-none">내용<a style="color: red;">&nbsp;*</a></div>
        
        <!-- 에디터를 적용할 요소 (컨테이너) -->
        <div id="content"></div>
        <!-- TOAST TUI 에디터 JS CDN -->
        <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>
        <script>
          const editor = new toastui.Editor({
            el: document.querySelector('#content'), // 에디터를 적용할 요소 (컨테이너)
            height: '500px', // 에디터 영역의 높이 값 (OOOpx || auto)
            initialEditType: 'wysiwyg', // 최초로 보여줄 에디터 타입 (markdown || wysiwyg)
            previewStyle: 'vertical', // 마크다운 프리뷰 스타일 (tab || vertical)
            toolbarItems: [
              ['heading', 'bold', 'italic', 'strike'],
              ['hr', 'quote'],
              ['ul', 'ol', 'task', 'indent', 'outdent'],
              ['table', 'image', 'link'], //게시판 내에 이미지, 표 안쓰려면 'table', 'image' 주석처리 필요
              ['code', 'codeblock'],
              ['scrollSync'],
             ],
          });
          

        </script>
        <br />
        <!-- 취소&등록 버튼 -->
          <div class="d-flex gap-2" >
          <button type="button" class="btn btn-secondary editorButton" id="cancelButton" onclick="location.href='/boardMain'">취소</button>
          <button type="submit" class="btn btn-primary editorButton" id="submitButton">등록</button>
        </div>      
        </form>
        
</html>
</main>

<footer class="mt-auto text-white-50">
  <p>SeSAC 용산2기 풀스텍 웹개발자 양성과정 @내 통장에 6조</p>
</footer>
</div>
<script>
  // 등록 버튼 유효성 검사
 (() => {
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  const forms = document.querySelectorAll('.needs-validation')

  // Loop over them and prevent submission
  Array.from(forms).forEach(form => {
    form.addEventListener('submit', event => {
      if (!form.checkValidity()) {
        event.preventDefault()
        event.stopPropagation()
      }

      form.classList.add('was-validated')
    }, false)
  })
})()

// 등록버튼 클릭시 데이터 전송
document.getElementById('submitButton').addEventListener('click', function(event) {
    event.preventDefault();

    const categoryId = document.getElementById('validationCustom04').value;
    const title = document.getElementById('validationCustom01').value;
    const content = editor.getMarkdown(); // 에디터 내용
    const nickname = '사용자닉네임'; // 로그인한 사용자의 닉네임

    axios.post('/boardSubmit', {
      category_id: categoryId,
      title: title,
      content: content,
      nickname: nickname
    })
    .then(function (response) {
      console.log(response);
      // 성공 시 게시판 메인 페이지로 리다이렉트
      window.location.href = '/boardMain';
    })
    .catch(function (error) {
      console.log(error);
      // 에러 처리 로직
    });
  });

</script>

</body>
</html>