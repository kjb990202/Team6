<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <script
            src="https://code.jquery.com/jquery-3.7.1.min.js"
            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
            crossorigin="anonymous">
        </script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a54c1412f5e82ee9e5256c32dc403b24"></script>
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a54c1412f5e82ee9e5256c32dc403b24&libraries=LIBRARY"></script>
        
        <!-- services 라이브러리 불러오기 -->
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a54c1412f5e82ee9e5256c32dc403b24&libraries=services"></script>
        
        <!-- services와 clusterer, drawing 라이브러리 불러오기 -->
        <script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a54c1412f5e82ee9e5256c32dc403b24&libraries=services,clusterer,drawing"></script>
    </head>
    <body>
        <div id="map" style="width:100%;height:350px;"></div>
        <p><em>지도를 클릭해주세요!</em></p> 
        <div id="clickLatlng"></div>
        
        <script>
        var mapContainer = document.getElementById('map'), // 지도를 표시할 div  
            mapOption = { 
                center: new kakao.maps.LatLng(37.5336884686592, 126.96331137446647), // 지도의 중심좌표
                level: 3 // 지도의 확대 레벨
            };

        var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다

        var positionsCenter = {
                title: 'SeSAc 용산 캠퍼스',
                shopCategory : "학원",
                latitude : 37.534274144597795,
                longitude : 126.96339311503539,
                latlng: new kakao.maps.LatLng(37.5336884686592, 126.96331137446647)
            };

        var imageSrcCenter = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png"; 

        // 마커 이미지의 이미지 크기 입니다
        var imageSizeCenter = new kakao.maps.Size(24, 35); 
        
        // 마커 이미지를 생성합니다    
        var markerImageCenter = new kakao.maps.MarkerImage(imageSrcCenter, imageSizeCenter); 
        
        // 마커를 생성합니다
        var markerCenter = new kakao.maps.Marker({
            map: map, // 마커를 표시할 지도
            position: positionsCenter.latlng, // 마커를 표시할 위치
            title : positionsCenter.title, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀이 표시됩니다
            image : markerImageCenter // 마커 이미지 
        });


        // SB: 임시 DB 내용을 positions 포함시켰습니다.
        // 마커를 표시할 위치와 title 객체 배열입니다 
        var positions = [
            {
                title : "천궁",
                shopCategory : "음식점",
                latitude : 37.534274144597795,
                longitude : 126.96339311503539,
                latlng: new kakao.maps.LatLng(37.534274144597795, 126.96339311503539)
            },
            {
                title : "160도",
                shopCategory : "음식점",
                latitude : 37.53434626403997,
                longitude : 126.96352036392501,
                latlng: new kakao.maps.LatLng(37.53434626403997, 126.96352036392501)
            },
            {
                title : "GS25",
                shopCategory : "편의점",
                latitude : 37.53438684222391,
                longitude : 126.96362782860363,
                latlng: new kakao.maps.LatLng(37.53438684222391, 126.96362782860363)
            }
        ];

        // 마커 이미지의 이미지 주소입니다
        var imageSrc = "http://t1.daumcdn.net/localimg/localimages/07/2018/pc/img/marker_spot.png"; 

        for (var i = 0; i < positions.length; i ++) {
            
            // 마커 이미지의 이미지 크기 입니다
            var imageSize = new kakao.maps.Size(24, 35); 
            
            // 마커 이미지를 생성합니다    
            var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize); 
            
            // 마커를 생성합니다
            var marker = new kakao.maps.Marker({
                map: map, // 마커를 표시할 지도
                position: positions[i].latlng, // 마커를 표시할 위치
                title : positions[i].title, // 마커의 타이틀, 마커에 마우스를 올리면 타이틀이 표시됩니다
                image : markerImage // 마커 이미지 
                });
            }



            var iwContent = `<div style="padding:5px;">
                                ${positions[0].title}
                                <span style="font-size: 11px;">${positions[0].shopCategory}</span>
                                <br>
                                <button style="color:blue" target="_blank">리뷰보기</button>
                            </div>`, // 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다
                iwPosition = new kakao.maps.LatLng(36.6336884686592, 126.96331137446647), //인포윈도우 표시 위치입니다
                iwRemoveable = true; // removeable 속성을 ture 로 설정하면 인포윈도우를 닫을 수 있는 x버튼이 표시됩니다

            // 인포윈도우를 생성합니다
            var infowindow = new kakao.maps.InfoWindow({
                position : iwPosition, 
                content : iwContent,
                removable : iwRemoveable
            });
            
            // 마커 위에 인포윈도우를 표시합니다. 두번째 파라미터인 marker를 넣어주지 않으면 지도 위에 표시됩니다
            infowindow.open(map, marker); 



            // 마커에 클릭이벤트를 등록합니다
            kakao.maps.event.addListener(marker, 'click', function() {
                // 마커 위에 인포윈도우를 표시합니다
                infowindow.open(map, marker);  
            });

        </script>
    </body>
</html>